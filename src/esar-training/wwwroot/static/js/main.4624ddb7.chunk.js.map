{"version":3,"sources":["user-manager.js","actions/index.js","reducers/progress-reducer.js","store.js","reducers/oidc-reducer.js","reducers/records-reducer.js","reducers/trainees-reducer.js","reducers/schedule-reducer.js","reducers/roster-reducer.js","reducers/member-reducer.js","pages/logged-in.jsx","pages/home.jsx","components/auth-required.jsx","utils.js","components/authorization.jsx","components/task-list.jsx","pages/trainee.jsx","pages/trainees.jsx","pages/admin-home.jsx","pages/course-list.jsx","pages/course-roster.jsx","components/step.jsx","pages/registration.jsx","App.jsx","serviceWorker.js","index.js","assets/can2-checkin.jpg","assets/team-evac.jpg","assets/in-the-woods.jpg","assets/litter-wheel.jpg"],"names":["userManagerConfig","Object","assign","client_id","redirect_uri","concat","window","location","protocol","hostname","port","baseUrl","response_type","scope","authority","silent_redirect_uri","automaticSilentRenew","filterProtocolClaims","loadUserInfo","siteAuth","userManager","createUserManager","REQUEST_RECORDS","RECEIVE_RECORDS","UPDATE_PROGRESS","REQUEST_SESSIONS","RECEIVE_SESSIONS","SET_MEMBER","SIGNING_OUT","RECEIVE_ROLES","REQUEST_TRAINEES","RECEIVE_TRAINEES","REQUEST_TRAINEE","RECEIVE_TRAINEE","REQUEST_ROSTER","RECEIVE_ROSTER","LEAVING_SESSION","JOINING_SESSION","getUserData","dispatch","getState","state","type","axios","get","config","remoteRoot","member","id","oidc","user","profile","memberId","then","msg","payload","data","items","filterNames","tasks","map","t","title","getSchedule","forMember","localRoot","getRoster","courseName","session","requests","r","trainees","find","toLowerCase","Promise","resolve","contacts","all","computers","online","task","record","records","status","completed","moment","paperwork","backgroundKnown","personal","defaultState","signedIn","keys","sessionStorage","filter","i","startsWith","length","summary","category","details","hours","prereqs","loaded","loading","progress","authRoot","unitId","siteConfig","middleware","thunkMiddleware","localStorage","showLogging","loggerMiddleware","createLogger","push","rootReducer","combineReducers","arguments","undefined","action","newState","actions","signingOut","objectSpread","roles","expired","names","reduce","prev","cur","course","name","sort","expires","reduceTraineeDetail","p","blocking","available","blocked","getProgress","schedule","courses","roster","store","createStore","applyMiddleware","apply","CallbackPage","successCallback","_this","props","history","redirect","react_default","a","createElement","redux_oidc","this","errorCallback","React","Component","withRouter","connect","HomePage","carouselSettings","dots","infinite","autoplay","autoplaySpeed","className","react_slick_lib_default","settings","src","Image1","alt","Image2","Image3","Image4","href","route","routing","ownProps","AuthRequired","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","loginIfNeeded","_this$props","getRoles","sub","setItem","pathname","search","hash","signinRedirect","token_type","children","userId","isInRole","role","Array","isArray","Authorization","group","allowSelf","allowMember","allowAdmin","showDenied","isLoggedIn","access_token","asFullMember","asAdmin","asSelf","isSelf","Subheader","style","marginTop","MarkdownItem","rawMarkup","marked","markdown","sanitize","dangerouslySetInnerHTML","__html","TaskListItem","onClick","onPick","text","badge","signup","f","registered","b","task_list_ListItem","secondary","ListItem","_this$props2","ListGroupItem","tag","ListGroupItemHeading","flexWrap","Badge","pill","ListGroupItemText","InfoPopup","renderBody","_this2","task_list_MarkdownItem","renderPrereqs","_this2$props","key","ListGroup","pBody","renderProgress","bBody","isAfter","fromNow","infoBodyComponents","SessionInfo","_this3","leavePrompt","leaving","joinPrompt","joining","onClickLeave","setState","onConfirmLeave","doLeave","catch","onClickJoin","doJoin","renderLocation","bind","assertThisInitialized","_this4","_this$props3","sched","baseContent","prototype","prog","marginBottom","s","moment1","when","moment2","add","dates","isSame","format","slotsText","current","capacity","waiting","registerText","registrationButton","Button","disabled","padding","color","marginRight","registrationAction","authorization","registeredText","registration","flexDirection","alignItems","lib","into","Modal","isOpen","ModalHeader","ModalBody","calendar","sameElse","ModalFooter","marginLeft","outline","TaskList","infoDialog","infoTitle","openTaskInfo","thisProgress","_this5","buildInfoBody","closeInfo","ComponentType","doLeaveSession","doJoinSession","buildListItem","task_list_TaskListItem","_this$props4","_this6","_this$props5","task_list_Subheader","toggle","TraineePage","auth_required","react_router_dom","to","task_list","sessionId","delete","result","post","TraineesPage","getTraineesData","prevProps","list","Link","AdminHomePage","CourseListPage","nextprops","getScheduleData","active","Table","backgroundColor","o","isBefore","textDecoration","CourseRosterPage","courseId","match","params","display","console","log","nextProps","nextState","offering","prevT","curT","prevO","curO","getRosterData","trainee","getTrainee","last","colSpan","first","value","onWaitList","renderTable","Step","step","requiredTrainings","ExistingAccountRow","account","sendInvitation","sendingInvite","inviteDom","username","email","RegistrationPage","changeFirst","evt","firstname","target","changeMiddle","middlename","changeLast","lastname","changeBirth","birthdate","changeGender","gender","changeEmail","changePhone","phone","changeUsername","componentDidUpdate","prevState","throttledMemberSearch","throttledUserSearch","useMember","newMember","memberName","memberSearchList","loadMember","memberLookupTimer","clearTimeout","setTimeout","cancelToken","CancelToken","c","finally","memberQueryToken","createMember","isValid","postData","middle","birthDate","reason","alert","creatingMemberToken","loadingMember","spread","trainings","accounts","emails","emailId","phones","phoneId","userTrainings","userAccounts","createEmail","creatingEmailToken","createPhone","subType","creatingPhoneToken","test","usernameLookupTimer","usernameOk","usernameQueryToken","createUser","creatingUserToken","url","userQueryToken","trainingDom","userTraining","completeDom","step_Step","FormGroup","Label","for","Input","onChange","readOnly","rel","replace","creatingMember","m","creatingUser","watchMemberId","_store$getState","subscribe","App","toggleAuth","doSignin","doSignout","Navbar","dark","expand","NavbarToggler","Collapse","navbar","Nav","NavItem","react_router","exact","path","component","LoggedInPage","render","CoursesPage","CourseRoster","margin","textAlign","fontSize","origin","substring","signoutRedirect","Boolean","interceptors","request","use","headers","error","reject","loadUser","ReactDOM","es","src_App","document","getElementById","navigator","serviceWorker","ready","unregister","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.4624ddb7.chunk.js","sourcesContent":["import { createUserManager } from 'redux-oidc';\r\n\r\nconst userManagerConfig = Object.assign({\r\n  client_id: 'esar-trainingapp',\r\n  redirect_uri: `${window.location.protocol}//${window.location.hostname}${window.location.port ? `:${window.location.port}` : ''}${window.baseUrl || '/'}loggedIn`,\r\n  response_type: 'token id_token',\r\n  scope: 'openid profile database-api auth-api',\r\n  authority: 'http://localhost:5100',\r\n  silent_redirect_uri: `${window.location.protocol}//${window.location.hostname}${window.location.port ? `:${window.location.port}` : ''}${window.baseUrl || '/'}silent_renew.html`,\r\n  automaticSilentRenew: true,\r\n  filterProtocolClaims: true,\r\n  loadUserInfo: true,\r\n}, window.siteAuth);\r\n\r\nconst userManager = createUserManager(userManagerConfig);\r\n\r\nexport default userManager;","import axios from 'axios'\r\nimport userManager from '../user-manager'\r\n\r\nexport const REQUEST_RECORDS = 'REQUEST_RECORDS'\r\nexport const RECEIVE_RECORDS = 'RECEIVE_RECORDS'\r\nexport const UPDATE_PROGRESS = 'UPDATE_PROGRESS'\r\nexport const REQUEST_SESSIONS = 'REQUEST_SESSIONS'\r\nexport const RECEIVE_SESSIONS = 'RECEIVE_SESSIONS'\r\nexport const SET_MEMBER = 'SET_MEMBER'\r\nexport const SIGNING_OUT = 'SIGNING_OUT'\r\nexport const RECEIVE_ROLES = 'RECEIVE_ROLES'\r\nexport const REQUEST_TRAINEES = 'REQUEST_TRAINEES'\r\nexport const RECEIVE_TRAINEES = 'RECEIVE_TRAINEES'\r\nexport const REQUEST_TRAINEE = 'REQUEST_TRAINEE'\r\nexport const RECEIVE_TRAINEE = 'RECEIVE_TRAINEE'\r\nexport const REQUEST_ROSTER = 'REQUEST_ROSTER'\r\nexport const RECEIVE_ROSTER = 'RECEIVE_ROSTER'\r\n\r\nexport const UPLOAD_TRAINING_DOCUMENT = 'ADD_TRAINING_DOCUMENT'\r\n\r\nexport const LEAVING_SESSION = 'LEAVING_SESSION'\r\nexport const JOINING_SESSION = 'JOINING_SESSION'\r\n\r\nexport function getUserData() {\r\n  return (dispatch, getState) => {\r\n    var state = getState();\r\n\r\n    dispatch({type: REQUEST_RECORDS})\r\n    return axios.get(`${state.config.remoteRoot}/members/${state.member.id || state.oidc.user.profile.memberId}`)\r\n    .then((msg) => {\r\n      dispatch({type: SET_MEMBER, payload: msg.data})\r\n      return axios.get(`${state.config.remoteRoot}/members/${state.member.id || state.oidc.user.profile.memberId}/trainingrecords`)\r\n    })\r\n    .then((msg) =>\r\n      dispatch({type: RECEIVE_RECORDS, payload: {data: msg.data.items, filterNames: state.tasks.map(t => t.title)}}))\r\n    .then(() =>\r\n      dispatch({type: UPDATE_PROGRESS, payload: getState() }))\r\n  }\r\n}\r\n\r\nexport function getTrainee(memberId) {\r\n  return (dispatch, getState) => {\r\n    var state = getState();\r\n    let member = null\r\n\r\n    if ((state.trainees.items||[]).find(t => t.id.toLowerCase() === memberId.toLowerCase())) return Promise.resolve()\r\n\r\n    dispatch({type: REQUEST_TRAINEE, payload: { id: memberId }})\r\n    return axios.get(`${state.config.remoteRoot}/members/${memberId}`)\r\n    .then((msg) => {\r\n      member = msg.data\r\n      return axios.get(`${state.config.remoteRoot}/members/${memberId}/contacts`)\r\n      .then((msg) => {\r\n        dispatch({type: RECEIVE_TRAINEE, payload: { member, contacts: msg.data }})\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nexport function getSchedule(forMember) {\r\n  return (dispatch, getState) => {\r\n    var state = getState()\r\n    const memberId = forMember ? state.member.id : null\r\n    dispatch({ type: REQUEST_SESSIONS, payload: { memberId } })\r\n    return axios.get(`${state.config.localRoot}/api/schedule` + (forMember ? `/${state.member.id || state.oidc.user.profile.memberId}` : ''))\r\n    .then((msg) => dispatch({type: RECEIVE_SESSIONS, payload: { data: msg.data.items, memberId }}))\r\n    .then(() => dispatch({type: UPDATE_PROGRESS, payload: getState() }))\r\n  }\r\n}\r\n\r\nexport function getRoster(courseName, session) {\r\n  return (dispatch, getState) => {\r\n    var state = getState()\r\n    dispatch({type: REQUEST_ROSTER, payload: { courseName, session }})\r\n    return axios.get(`${state.config.localRoot}/api/sessions/${session.id}/roster`)\r\n    .then((msg) => {\r\n      dispatch({type: RECEIVE_ROSTER, payload: { data: msg.data, courseName, session }})\r\n      var requests = msg.data.map(r => getTrainee(r.memberId)(dispatch, getState))\r\n      return Promise.all(requests)\r\n    })\r\n  }\r\n}\r\n\r\nexport function doSignin(targetUrl) {\r\n  return (dispatch, getState) => {\r\n    var state = getState();\r\n    if (!state.oidc.user || !state.oidc.user.token_type) {\r\n      const origin = `${window.location.protocol}//${window.location.hostname}${window.location.port ? `:${window.location.port}` : ''}`\r\n      sessionStorage.setItem('redirect', window.location.href.substring(origin.length))\r\n      return userManager.signinRedirect();\r\n    }\r\n    return Promise.resolve()\r\n  }\r\n}\r\n\r\nexport function getRoles(userId) {\r\n  return (dispatch, getState) => {\r\n    var state = getState()\r\n    return axios.get(`${state.config.authRoot}/Account/${userId}/Groups`)\r\n    .then((msg) => {\r\n      dispatch({type: RECEIVE_ROLES, payload: { roles: msg.data.data, userId }})\r\n    //  var requests = msg.data.map(r => getTrainee(r.memberId)(dispatch, getState))\r\n    //  return Promise.all(requests)\r\n    })\r\n  }\r\n}\r\n\r\nexport function doSignout() {\r\n  return (dispatch, getState) => {\r\n    var state = getState();\r\n    if (state.oidc.user && state.oidc.user.token_type) {\r\n      dispatch({type: SIGNING_OUT})\r\n      sessionStorage.setItem('redirect', window.baseUrl || '/')\r\n      return userManager.signoutRedirect();\r\n    }\r\n    return Promise.resolve()\r\n  }\r\n}\r\n\r\nexport function getTraineesData() {\r\n  return (dispatch, getState) => {\r\n    var state = getState();\r\n\r\n    dispatch({type: REQUEST_TRAINEES})\r\n    return axios.get(`${state.config.remoteRoot}/units/${state.config.unitId}/memberships/bystatus/trainee`)\r\n    .then((msg) => {\r\n      dispatch({type: RECEIVE_TRAINEES, payload: msg.data})\r\n    })\r\n  }\r\n}\r\n\r\nexport function doLeaveSession(sessionId) {\r\n  return (dispatch, getState) => {\r\n    var state = getState();\r\n\r\n    dispatch({type: LEAVING_SESSION, payload: { id: sessionId }})\r\n    return axios.delete(`${state.config.localRoot}/api/schedule/${state.member.id}/session/${sessionId}`)\r\n    .then((msg) => {\r\n      dispatch({type: RECEIVE_SESSIONS, payload: { data: msg.data.result.items }})\r\n      return msg.data\r\n    })\r\n  }\r\n}\r\n\r\nexport function doJoinSession(sessionId) {\r\n  return (dispatch, getState) => {\r\n    var state = getState();\r\n\r\n    dispatch({type: JOINING_SESSION, payload: { id: sessionId }})\r\n    return axios.post(`${state.config.localRoot}/api/schedule/${state.member.id}/session/${sessionId}`)\r\n    .then((msg) => {\r\n      dispatch({type: RECEIVE_SESSIONS, payload: { data: msg.data.result.items }})\r\n      return msg.data\r\n    })\r\n  }\r\n}","import * as actions from '../actions'\r\nimport moment from 'moment'\r\n\r\nconst computers = {\r\n  online: function(task, state) {\r\n    const record = (state.records.items || [])[task.title] || {}\r\n    return {\r\n      status: record.completed ? 'Complete' : null,\r\n      completed: record.completed ? moment(record.completed) : null\r\n    }\r\n  },\r\n  session: function(task, state) {\r\n    const record = (state.records.items || [])[task.title] || {}\r\n    return {\r\n      status: record.completed ? 'Complete' : null,\r\n      completed: record.completed ? moment(record.completed) : null\r\n    }\r\n  },\r\n  paperwork: function(task, state) {\r\n    switch (task.title) {\r\n      case 'Background Check':\r\n        return { status: state.member.backgroundKnown ? 'Complete' : null, completed: !!state.member.backgroundKnown }\r\n      \r\n        default:\r\n          const record = (state.records.items || [])[task.title]\r\n          if (record) {\r\n            return {\r\n              status: record.completed ? 'Complete' : null,\r\n              completed: record.completed ? moment(record.completed) : null\r\n            }\r\n          }\r\n          return { status: null}\r\n    }\r\n  },\r\n  personal: function(task, state) {\r\n    return { status: null }\r\n  }\r\n}\r\n\r\nfunction getProgress(task, progress, state) {\r\n  const p = computers[task.category](task, state);\r\n  const blocking = []\r\n  for (var i=0; i < (task.prereqs || []).length; i++) {\r\n    const name = task.prereqs[i]\r\n    var otherProgress = progress[name]\r\n    if (otherProgress.status !== 'Complete') blocking.push(name)\r\n  }\r\n\r\n  const result = Object.assign(p, {\r\n    available: task.category !== 'personal' && !p.completed && !blocking.length,\r\n    blocked: task.category === 'personal' ? null : blocking.length ? blocking : null,\r\n  })\r\n  return result\r\n}\r\n\r\nexport default function progressReducer(state = [], action) {\r\n  switch (action.type) {\r\n    case actions.UPDATE_PROGRESS:\r\n      return action.payload.tasks.reduce((prev, cur) => { prev[cur.title] = getProgress(cur, prev, action.payload); return prev }, {})\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { createLogger } from 'redux-logger'\r\n\r\nimport progress from './reducers/progress-reducer'\r\nimport records from './reducers/records-reducer'\r\nimport trainees from './reducers/trainees-reducer'\r\nimport schedule from './reducers/schedule-reducer'\r\nimport member from './reducers/member-reducer'\r\nimport roster from './reducers/roster-reducer'\r\nimport oidc from './reducers/oidc-reducer'\r\n\r\nconst defaultState = {\r\n  oidc: { signedIn: false, user: Object.keys(sessionStorage).filter(function(i) { return i.startsWith('oidc.user')}).length ? {} : null},\r\n  tasks: [\r\n      { 'title': 'Contact Information', summary: 'Address, Email, Phone Number', category: 'personal' },\r\n      { 'title': 'Emergency Contacts', summary: 'Who to call in an emergency', category: 'personal' },\r\n      { 'title': 'ICS-100', summary: 'FEMA required online course', category: 'online', details: 'ICS 100, Introduction to the Incident Command System, introduces the Incident Command System (ICS) and provides the foundation for higher level ICS training. This course describes the history, features and principles, and organizational structure of the Incident Command System. It also explains the relationship between ICS and the National Incident Management System (NIMS).\\n\\nhttps://training.fema.gov/is/courseoverview.aspx?code=IS-100.b' },\r\n      { 'title': 'ICS-700', summary: 'FEMA required online course', category: 'online', details: 'This course introduces and overviews the National Incident Management System (NIMS). NIMS provides a consistent nationwide template to enable all government, private-sector, and nongovernmental organizations to work together during domestic incidents.\\n\\nhttps://training.fema.gov/is/courseoverview.aspx?code=IS-700.a', },\r\n      { 'title': 'Course A', summary: 'Evening orientation', category: 'session', details: 'This is an in-town weeknight informational meeting used to present ESAR objectives, organization and procedures.\\n\\nDiscussions center on basic training course content, requirements for team member field qualification, and personal equipment needs.', hours: 2},\r\n      { 'title': 'Course B', summary: 'Indoor navigation course', category: 'session', prereqs: ['Course A'], hours: 9 },\r\n      { 'title': 'First Aid', summary: 'American Heart (AHA), Red Cross (ARC) or equivalent First Aid card', category: 'paperwork', details: 'Submit a scan or picture of a current first aid card to training.admin@kcesar.org' },\r\n      { 'title': 'CPR', summary: 'American Heart (AHA), Red Cross (ARC) or equivalent CPR card', category: 'paperwork', details: 'Submit a scan or picture of a current CPR card to training.admin@kcesar.org' },\r\n      { 'title': 'ESAR F/A - Basic', summary: '', category: 'session', hours: 3, prereqs: ['Course A', 'First Aid', 'CPR']},\r\n      { 'title': 'ESAR F/A - Intermediate', summary: '', category: 'session', hours: 3, prereqs: ['Course B', 'ESAR F/A - Basic']},\r\n      { 'title': 'Background Check', summary: \"Sheriff's Office application\", category: 'paperwork', details: 'All potential KCESAR members submit an application to the King County Sheriff\\'s office, who will conduct a criminal background check on the applicant.\\n\\nThis status will be updated when we are informed that you have passed this check. KCESAR does not receive the result of the background check except a pass/fail from the sheriff\\'s office.' },\r\n      { 'title': 'LFL Registration', summary: \"For youth members\", category: 'paperwork' },\r\n//      { 'title': 'Submit Photo', summary: \"Submit portrait for ID card\", category: 'paperwork' },\r\n      { 'title': 'Course C', summary: \"Outdoor weekend - Intro to SAR\", category: 'session', hours: 32.5, prereqs: ['Course B', 'ESAR F/A - Basic' /*, 'Background Check', 'LFL Registration'*/] },\r\n      { 'title': 'Course I', summary: \"Outdoor weekend - Navigation\", category: 'session', prereqs: ['Course C'], hours: 31 },\r\n      { 'title': 'Course II', summary: \"Outdoor weekend - Evaluation\", category: 'session', prereqs: ['Course I'], hours: 31 },\r\n      { 'title': 'ESAR F/A - Advanced', summary: \"SAR specific first aid\", category: 'session', prereqs: ['Course II', 'ESAR F/A - Intermediate'], hours: 9 },\r\n      { 'title': 'Course III', summary: \"Outdoor weekend - mock mission\", category: 'session', prereqs: ['ESAR F/A - Advanced', 'ICS-100', 'ICS-700'], hours: 31 },\r\n      { 'title': 'ESAR Ops Orientation', summary: 'Information for new graduates about responding to missions, etc.', category: 'session', prereqs: ['Course III'], hours: 2 }\r\n    ],\r\n  trainees: [],\r\n  records: { loaded: false, loading: false},\r\n  progress: {},\r\n  config: Object.assign({\r\n    localRoot: '',\r\n    remoteRoot: 'http://localhost:4944/api2',\r\n    authRoot: 'http://localhost:5100',\r\n    unitId: 'C2F99BB4-3056-4097-9345-4B8797F40E10'\r\n  }, window.siteConfig)\r\n}\r\n\r\nconst middleware = [\r\n  thunkMiddleware\r\n]\r\n\r\nif(process.env.NODE_ENV === 'development' || (localStorage && localStorage.showLogging)) {\r\n\tconst loggerMiddleware = createLogger();\r\n\tmiddleware.push(loggerMiddleware);\r\n}\r\n\r\nconst rootReducer = combineReducers({\r\n  oidc,\r\n  tasks: function tasksReducer(state = [], action) { return state },\r\n  config: function tasksReducer(state = [], action) { return state },\r\n  records,\r\n  trainees,\r\n  progress,\r\n  schedule,\r\n  roster,\r\n  member\r\n})\r\n\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  defaultState,\r\n  applyMiddleware(...middleware)\r\n)\r\n\r\nexport default store","import { reducer as oidc } from 'redux-oidc'\r\nimport * as actions from '../actions'\r\n\r\nexport default function oidcReducer(state = {}, action) {\r\n  const newState = oidc(state, action)\r\n\r\n  switch (action.type) {\r\n    case actions.SIGNING_OUT:\r\n      return { signingOut: true }\r\n\r\n    case actions.RECEIVE_ROLES:\r\n      return { ...state, roles: action.payload.roles }\r\n\r\n    case 'redux-oidc/USER_FOUND':\r\n      return { ...newState, expired: false, signedIn: true }\r\n\r\n    case 'redux-oidc/USER_EXPIRED':\r\n      return { ...newState, expired: true, signedIn: false }\r\n\r\n    default:\r\n      return newState\r\n  }\r\n}","import * as actions from '../actions'\r\nimport moment from 'moment'\r\n\r\nfunction doDates(record) {\r\n  record.completed = record.completed ? moment(record.completed) : null\r\n  record.expires = record.expires ? moment(record.expires) : null\r\n  return record\r\n}\r\n\r\nexport default function recordsReducer(state = [], action) {\r\n  switch (action.type) {\r\n    case actions.REQUEST_RECORDS:\r\n      return Object.assign({}, state, { loading: true })\r\n      \r\n    case actions.RECEIVE_RECORDS:\r\n      const names = action.payload.filterNames.reduce((prev, cur) => { prev[cur] = true; return prev }, {})\r\n      const interestingRecords = action.payload.data.filter(r => names[r.course.name]).sort(r => r.completed)\r\n      const records = interestingRecords.reduce((prev, cur) => { prev[cur.course.name] = doDates(cur); return prev}, {})\r\n\r\n      return Object.assign({}, state, {\r\n         loading: false,\r\n         loaded: true,\r\n         items: records\r\n      })\r\n\r\n    default:\r\n      return state;\r\n  }  \r\n}","import * as actions from '../actions'\r\n\r\nfunction reduceTraineeDetail(state, payload) {\r\n  let found = false\r\n  const details = Object.assign({}, payload.member, { contacts: payload.contacts })\r\n\r\n  const newState = {...state,\r\n      items: (state.items||[]).map(\r\n        t => t.id === payload.member.id\r\n                ? Object.assign({}, t, details) \r\n                : t\r\n      )\r\n    }\r\n  if (!found) {\r\n    newState.items.push(details)\r\n  }\r\n  return newState\r\n}\r\n\r\nexport default function recordsReducer(state = [], action) {\r\n  switch (action.type) {\r\n    case actions.REQUEST_TRAINEES:\r\n      return {...state, loading: true }\r\n      \r\n    case actions.RECEIVE_TRAINEES:\r\n      return {...state,\r\n         loading: false,\r\n         loaded: true,\r\n         ...action.payload\r\n      }\r\n\r\n    case actions.RECEIVE_TRAINEE:\r\n      return reduceTraineeDetail(state, action.payload)  \r\n\r\n    default:\r\n      return state;\r\n  }  \r\n}","import * as actions from '../actions'\r\n\r\nexport default function scheduleReducer(state = { loaded: false, loading: false, courses: {}}, action) {\r\n  switch (action.type) {\r\n    case actions.REQUEST_SESSIONS:\r\n      return { ...state, loading: true, memberId: action.payload.memberId }\r\n    case actions.RECEIVE_SESSIONS:\r\n      return { loading: false, loaded: true, memberId: action.payload.data, courses: action.payload.data }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import * as actions from '../actions'\r\n\r\nexport default function rosterReducer(state = { loaded: false, loading: false, items: []}, action) {\r\n  switch (action.type) {\r\n    case actions.REQUEST_ROSTER:\r\n      return { ...state, loading: true, session: action.payload.session, courseName: action.payload.courseName }\r\n    case actions.RECEIVE_ROSTER:\r\n      return Object.assign({}, state, {\r\n        loading: false,\r\n        loaded: true,\r\n        items: action.payload.data\r\n      })\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import * as actions from '../actions'\r\n\r\nexport default function memberReducer(state = {}, action) {\r\n  switch (action.type) {\r\n    case actions.SET_MEMBER:\r\n      return action.payload\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\nimport { CallbackComponent } from 'redux-oidc';\r\nimport userManager from '../user-manager';\r\n\r\nclass CallbackPage extends React.Component {\r\n  successCallback = () => {\r\n    this.props.history.push(sessionStorage.redirect || '/');\r\n  }\r\n\r\n  render() {\r\n    // just redirect to '/' in both cases\r\n    return (\r\n      <CallbackComponent userManager={userManager} successCallback={this.successCallback} errorCallback={this.successCallback}>\r\n        <div>\r\n          Redirecting...\r\n        </div>\r\n      </CallbackComponent>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    dispatch\r\n  };\r\n}\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(CallbackPage));","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Carousel from 'react-slick'\r\n\r\nimport 'slick-carousel/slick/slick.css'\r\nimport 'slick-carousel/slick/slick-theme.css'\r\nimport './home.css'\r\n\r\nimport Image1 from '../assets/can2-checkin.jpg'\r\nimport Image2 from '../assets/team-evac.jpg'\r\nimport Image3 from '../assets/in-the-woods.jpg'\r\nimport Image4 from '../assets/litter-wheel.jpg'\r\n\r\nclass HomePage extends Component {\r\n  render() {\r\n    const carouselSettings = {\r\n      dots: true,\r\n      infinite: true,\r\n      autoplay: true,\r\n      autoplaySpeed: 4000\r\n    }\r\n\r\n    return (\r\n      <div className='container py-4'>\r\n        <div className='row'>\r\n          <div className='sliderContainer col'>\r\n            <Carousel {...carouselSettings} settings={carouselSettings}>\r\n              <div><img src={Image1} alt=\"Trainees and staff\" /></div>\r\n              <div><img src={Image2} alt=\"Practicing an evacuation\" /></div>\r\n              <div><img src={Image3} alt=\"Searching in the woods\" /></div>\r\n              <div><img src={Image4} alt=\"Working with a wheeled litter (stretcher)\" /></div>\r\n            </Carousel>\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          <div className='col'>\r\n            <p>Welcome to King County Explorer Search and Rescue's (ESAR's) basic training program. Our series of trainings will\r\n            cover everything necessary to start participating in search and rescue missions in King County and across Washington\r\n            State. Previous training in search and rescue techniques is not required and we'll cover the basics of outdoor travel,\r\n            navigation and first aid.</p>\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          <div className='col'>\r\n            <p>You can learn more about the training program at <a href=\"http://kcesar.org/recruiting.html\">our web site</a></p>\r\n            <p>Existing trainees can sign in below and start tracking their progress.</p>\r\n          </div>\r\n        </div>\r\n        <div className='row justify-content-around'>\r\n          <a href=\"/me\" className='btn btn-primary col-11 col-sm-4 my-2'>Trainee Signin</a>\r\n          {/* <a href=\"/signup\" className='btn btn-outline-primary col-11 col-sm-4 my-2'>Sign Up</a>*/}\r\n        </div> \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    route: store.routing\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(HomePage);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport userManager from '../user-manager'\r\nimport * as actions from '../actions'\r\n\r\nclass AuthRequired extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.loginIfNeeded()\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.loginIfNeeded()\r\n  }\r\n\r\n  loginIfNeeded() {\r\n    const { oidc, getRoles } = this.props\r\n    if (oidc.roles || oidc.signingOut) {\r\n      return\r\n    }\r\n\r\n    if (oidc.user && oidc.user.profile) {\r\n      return getRoles(oidc.user.profile.sub)\r\n    }\r\n\r\n    sessionStorage.setItem('redirect', window.location.pathname + window.location.search + window.location.hash)\r\n    userManager.signinRedirect();\r\n  }\r\n\r\n  render() {\r\n    const { oidc } = this.props || {}\r\n    if (oidc.expired) return <div><strong>Your session has timed out.</strong></div>\r\n    return (<div>{(oidc.user && oidc.user.token_type) ? this.props.children : null }</div>)\r\n  }\r\n}\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    oidc: store.oidc\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getRoles: (userId) => dispatch(actions.getRoles(userId)),\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(AuthRequired);","export function isInRole(profile, role)\r\n{\r\n  if (!profile) return false\r\n  return Array.isArray(profile) ? (profile.filter(i => i === role).length > 0) : (profile === role) \r\n}\r\n\r\nexport function isSelf(user, memberId) {\r\n   const r = memberId ? (!!(user && user.access_token) && user.profile && user.profile.memberId &&user.profile.memberId.toLowerCase() === memberId.toLowerCase()) : false\r\n  // console.log(r)\r\n   return r\r\n  //return true\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { isInRole, isSelf } from '../utils'\r\n\r\nclass Authorization extends Component {\r\n\r\n  render() {\r\n    const { memberId, user, roles, children, group, allowSelf, allowMember, allowAdmin, showDenied } = this.props\r\n\r\n    const isLoggedIn = user && user.access_token\r\n    const asFullMember = (isLoggedIn && allowMember) && isInRole(roles, 'cdb.users')\r\n    const asAdmin = (isLoggedIn && allowAdmin) && isInRole(roles, 'esar.training')\r\n    const asSelf = allowSelf && isSelf(user, memberId)\r\n    const inGroup = group && isInRole(roles, group)\r\n\r\n    return (inGroup || asFullMember || asSelf || asAdmin) ? <div>{children}</div> : isLoggedIn ? (showDenied ? <div>no access</div> : null) : <div>loading ...</div>\r\n  }\r\n}\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    user: (store.oidc || {}).user,\r\n    roles: (store.oidc || {}).roles,\r\n    memberId: (store.member || {}).id\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, null)(Authorization);","import React, { Component } from 'react'\r\nimport { ListGroup, ListGroupItem, ListGroupItemHeading, ListGroupItemText, Badge } from 'reactstrap'\r\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'\r\nimport { Gateway } from 'react-gateway'\r\nimport marked from 'marked'\r\nimport moment from 'moment'\r\n\r\nimport Authorization from './authorization'\r\n\r\nclass Subheader extends Component {\r\n  render() {\r\n    return <p className='text-muted' style={{marginTop: '1rem'}}>{this.props.children}</p>\r\n  }\r\n}\r\n\r\nclass MarkdownItem extends Component {\r\n  render() {\r\n    const rawMarkup = marked(this.props.markdown || '', {sanitize: true});\r\n    return <div dangerouslySetInnerHTML={{__html: rawMarkup}} />\r\n  }\r\n}\r\n\r\nclass TaskListItem extends Component {\r\n  onClick = () => {\r\n    this.props.onPick(this.props.task)\r\n  }\r\n\r\n  render() {\r\n    const { task, schedule } = this.props\r\n    const text = task.title\r\n    let badge = null\r\n    if (schedule && schedule.courses[task.title]) {\r\n      const signup = schedule.courses[task.title].filter(f => f.registered !== 'no').sort((a,b) => a.registered < b.registered);\r\n      if (signup.length) badge = signup[0].registered === 'yes' ? 'Registered' : signup[0].registered === 'wait' ? 'Wait List' : signup[0].registered\r\n    }\r\n    return <ListItem text={text} secondary={task.summary} onClick={this.onClick} badge={badge} loading={task.category === 'session' && (schedule||{}).loading} />\r\n  }\r\n}\r\n\r\nclass ListItem extends Component {\r\n  render() {\r\n    const { text, secondary, badge, loading } = this.props\r\n    return <ListGroupItem tag=\"button\" action onClick={this.props.onClick}>\r\n    <ListGroupItemHeading className=\"justify-content-between\" style={{flexWrap:'wrap'}}>\r\n      {text}\r\n      {badge ? <Badge pill>{badge}</Badge> : null}\r\n      {loading ? <i className='fa fa-circle-o-notch fa-spin'></i> : null}\r\n    </ListGroupItemHeading>\r\n    <ListGroupItemText>{secondary}</ListGroupItemText>\r\n    </ListGroupItem>\r\n  }\r\n}\r\n\r\nclass InfoPopup extends Component {\r\n  render() {\r\n    const { task } = this.props\r\n    const pBody = this.renderProgress()\r\n    const bBody = this.renderPrereqs()\r\n    return <div>\r\n      <h5 className='dialog-subtitle'>{task.summary}</h5>\r\n      {this.renderBody()}\r\n      {pBody || bBody ? <hr /> : null}\r\n      {pBody}\r\n      {bBody}\r\n    </div>\r\n  }\r\n  renderBody = () => {\r\n    const { task } = this.props\r\n    return <MarkdownItem markdown={task.details} />\r\n  }\r\n  renderProgress() {\r\n   const { record } = this.props\r\n    return record && record.completed && (!record.expires || record.expires.isAfter(moment())) ?\r\n      <p className='text-success'>You completed this task{record.completed === true ? '' : (' ' + record.completed.fromNow())}.</p> :\r\n      <strong>You still need to complete this task</strong>\r\n  }\r\n  renderPrereqs = () => {\r\n    const { task, progress } = this.props\r\n\r\n    const data = (task.prereqs || []).map(p =>\r\n      <ListGroupItem key={p}>\r\n        <div className='hanging-fa-fw'>\r\n        <i className={`fa fa-fw ${progress[p].completed ? 'fa-check-square-o text-success' : 'fa-square-o'}`}></i>\r\n        {p}</div>\r\n      </ListGroupItem>\r\n    )\r\n\r\n    return data.length ? <div><h6>Prerequisites:</h6><ListGroup>{data}</ListGroup></div> : null\r\n  }\r\n}\r\n\r\nclass SessionInfo extends InfoPopup {\r\n  state = {\r\n    leavePrompt: null,\r\n    leaving: false,\r\n    joinPrompt: null,\r\n    joining: false\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.renderProgress = this.renderProgress.bind(this)\r\n    this.onConfirmLeave = this.onConfirmLeave.bind(this)\r\n  }\r\n\r\n\r\n\r\n  onClickLeave = (signup) => {\r\n    this.setState({leavePrompt: signup})\r\n  }\r\n\r\n  onConfirmLeave = () => {\r\n    this.setState({leaving: true})\r\n    this.props.actions.doLeave(this.state.leavePrompt.id)\r\n    .then(msg => {\r\n      this.setState({ leavePrompt: null })\r\n    })\r\n    .catch(() => {})\r\n    .then(() => {\r\n      this.setState({leaving: false})\r\n    })\r\n  }\r\n\r\n  onClickJoin = (session) => {\r\n    this.setState({joining: true, joinPrompt: session})\r\n    this.props.actions.doJoin(session.id)\r\n    .then(msg => {\r\n      this.setState({ joinPrompt: null })\r\n    })\r\n    .catch(() => {})\r\n    .then(() => {\r\n      this.setState({joining: false})\r\n    })\r\n  }\r\n\r\n  renderLocation = (location) => {\r\n    return location\r\n  }\r\n\r\n  renderProgress() {\r\n    const {task, schedule, progress} = this.props\r\n    const sched = schedule.courses[task.title]\r\n    const baseContent = super.renderProgress()\r\n    const prog = progress[task.title]\r\n\r\n    if (!sched || prog.completed) return baseContent\r\n\r\n    const blocked = prog.blocked && prog.blocked.length\r\n    //const registered = !!sched.find(s => s.registered === 'yes')\r\n\r\n    return !sched ? baseContent : <div>\r\n      {baseContent}\r\n      {blocked ? <div><small>You'll be able to register after completing the prerequisites</small></div>: null}\r\n      <div>Class Schedule:</div>\r\n      <ListGroup style={{marginBottom: '1em'}}>\r\n\r\n      {sched.map(s => {\r\n        const moment1 = moment(s.when)\r\n        const moment2 = moment(s.when).add(task.hours, 'hour')\r\n        const dates = moment1.isSame(moment2, 'day') ? moment1.format('MMM Do h:mma') :\r\n                      (moment1.format('MMM D') + ' - ' + moment2.format(moment1.isSame(moment2, 'month') ? 'D' : 'MMM Do'))\r\n\r\n        var signup = sched.find(f => s.id === f.id && f.registered !== 'no')\r\n\r\n        const slotsText = `${s.current}/${s.capacity} filled` + (s.waiting ? `, ${s.waiting} waiting` : '')\r\n        const registerText = s.current >= s.capacity || s.waiting ? 'Join Wait List' : 'Register'\r\n        const registrationButton = s === signup\r\n                                       ? <Button disabled={this.state.leaving || this.state.joining} style={{padding:0}} color=\"link\" onClick={() => this.onClickLeave(s)}>Leave</Button>\r\n                                       : <Button disabled={this.state.leaving || this.state.joining} style={{padding:0}} color=\"link\" onClick={() => this.onClickJoin(s)}>\r\n                                           {this.state.joining && s === this.state.joinPrompt ? <i className=\"fa fa-circle-o-notch fa-spin\" style={{marginRight: 5}}></i> : null}\r\n                                           {registerText}\r\n                                         </Button>\r\n        const registrationAction = blocked ? <Authorization allowAdmin>{registrationButton}</Authorization> : <Authorization allowSelf allowAdmin>{registrationButton}</Authorization>\r\n        const registeredText = s === signup ? s.registered === 'wait' ? <span>, <strong>Wait Listed</strong></span> : <span>, <strong>Registered</strong></span> : null\r\n\r\n        const registration = moment().isAfter(s.when) ? null : <div className='justify-content-between'><div>{slotsText}{registeredText}</div>{registrationAction}</div>\r\n\r\n/*        let registration = blocked ? null : <div><Authorization allowSelf allowAdmin><div><Button style={{padding:0}} color=\"link\">{registerText}</Button></div></Authorization>\r\n        var signup = sched.find(f => s.id === f.id && f.registered !== 'no')\r\n        if (s === signup) {\r\n          registration = <div>{slotsText}, {s.registered === 'wait' ? 'Wait Listed' : 'Registered'} <Authorization allowSelf allowAdmin><Button style={{padding:0}} color=\"link\" onClick={() => this.onClickLeave(s)}>Leave</Button></Authorization></div>\r\n        } else {\r\n          registration = <div>{slotsText}</div>\r\n        }\r\n*/\r\n        return <ListGroupItem key={s.when} style={{flexDirection: 'column', alignItems:'stretch'}}>\r\n          <div className='justify-content-between'>\r\n            <strong>{dates}</strong>\r\n            <span>{this.renderLocation(s.location)}</span>\r\n          </div>\r\n          {registration}\r\n        </ListGroupItem>\r\n      })}\r\n      </ListGroup>\r\n      { this.state.leavePrompt ? <Gateway into=\"root\">\r\n      <Modal isOpen={true}>\r\n          <ModalHeader>Leave Session</ModalHeader>\r\n          <ModalBody>\r\n            <p>If you leave this session and then choose to re-register you may be placed at the end of a wait list.</p>\r\n            <p> Do you want to leave the {task.title} session {moment(this.state.leavePrompt.when).calendar(null, { sameElse: '[on] MMM Do' })}?</p>\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <Button disabled={this.state.leaving} color=\"danger\" onClick={this.onConfirmLeave}>Leave{this.state.leaving ? <i style={{marginLeft:10}} className='fa fa-circle-o-notch fa-spin'></i> : null}</Button>\r\n            <Button disabled={this.state.leaving} outline color=\"primary\" onClick={() => this.setState({leavePrompt: null})}>Cancel</Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n      </Gateway> : null }\r\n    </div>\r\n  }\r\n}\r\n\r\nclass OnlineInfo extends InfoPopup {\r\n}\r\n\r\nconst infoBodyComponents = {\r\n  session: SessionInfo,\r\n  online: OnlineInfo,\r\n  paperwork: InfoPopup\r\n}\r\n\r\nclass TaskList extends Component {\r\n  state = {\r\n    infoDialog: null,\r\n    infoTitle: null\r\n  }\r\n\r\n  componentWillMount() {\r\n    const { getUserData, getSchedule } = this.props;\r\n    getUserData()\r\n    getSchedule()\r\n  }\r\n\r\n   openTaskInfo = (task) => {\r\n     const { progress } = this.props\r\n     const thisProgress = progress[task.title]\r\n     this.setState({infoDialog: this.buildInfoBody(task, thisProgress), infoTitle: task.title});\r\n  };\r\n\r\n   closeInfo = () => {\r\n     this.setState({infoDialog: null, infoTitle: null})\r\n   }\r\n\r\n   buildInfoBody = (task, progress) => {\r\n     const ComponentType = infoBodyComponents[task.category]\r\n     const actions = task.category === 'session' ? { doLeave: this.props.doLeaveSession, doJoin: this.props.doJoinSession } : {}\r\n     return ComponentType ? <ComponentType task={task} record={progress} progress={this.props.progress} schedule={this.props.schedule} actions={actions} /> : <div>No information</div>\r\n   }\r\n\r\n   buildListItem = (task, schedule) => {\r\n     return <TaskListItem key={task.title} task={task} onPick={this.openTaskInfo} schedule={schedule} />\r\n   }\r\n\r\n  render() {\r\n    const { tasks, records, progress, schedule } = this.props\r\n\r\n    return <div>\r\n        <Subheader>Personal Information</Subheader>\r\n        <ListGroup className='indent'>\r\n        <ListItem text='Contact Information' secondary='Address, Email, Phone number'/>\r\n        <ListItem text='Emergency Contacts' secondary='Who to call in an emergency'/>\r\n        </ListGroup>\r\n        <Subheader>Available Tasks</Subheader>\r\n        <ListGroup className='indent'>\r\n        {tasks.filter((i) => progress[i.title] && progress[i.title].available).map((i) => this.buildListItem(i, schedule))}\r\n        </ListGroup>\r\n        <Subheader>Blocked Tasks</Subheader>\r\n        <ListGroup className='indent'>\r\n        {tasks.filter((i) => progress[i.title] && progress[i.title].blocked).map((i) => this.buildListItem(i, schedule))}\r\n        </ListGroup>\r\n        <Subheader>Completed Tasks</Subheader>\r\n        <ListGroup className='indent'>\r\n        {tasks.filter((i) => progress[i.title] && progress[i.title].completed).map((i) => this.buildListItem(i))}\r\n        </ListGroup>\r\n        <Modal isOpen={!!records.loading}><ModalBody>Loading ...</ModalBody></Modal>\r\n        <Modal isOpen={!!this.state.infoDialog} toggle={this.closeInfo}>\r\n          <ModalHeader toggle={this.closeInfo}>{this.state.infoTitle}</ModalHeader>\r\n          <ModalBody>{this.state.infoDialog}</ModalBody>\r\n          <ModalFooter><Button color=\"outline-primary\" onClick={this.closeInfo}>Close</Button></ModalFooter>\r\n        </Modal>\r\n      </div>\r\n  }\r\n}\r\n\r\nexport default TaskList\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport * as actions from '../actions'\r\n\r\nimport AuthRequired from '../components/auth-required'\r\nimport Authorization from '../components/authorization'\r\nimport TaskList from '../components/task-list'\r\n\r\nclass TraineePage extends Component {\r\n  render() {\r\n    const { member, oidc } = this.props\r\n    return (\r\n      <div className='container-fluid py-4'>\r\n        <AuthRequired oidc={oidc}>\r\n          <Authorization allowMember>\r\n            <div><Link to=\"/admin/trainees\">&lt; Trainees List</Link></div>\r\n          </Authorization>\r\n          <Authorization allowSelf allowMember showDenied>\r\n            <div>{member ? member.name : ''}</div>\r\n            <TaskList {...this.props} />\r\n          </Authorization>\r\n        </AuthRequired>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    oidc: store.oidc,\r\n    member: store.member,\r\n    tasks: store.tasks,\r\n    records: store.records,\r\n    progress: store.progress,\r\n    schedule: store.schedule\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getUserData: () => dispatch(actions.getUserData()),\r\n    getSchedule: () => dispatch(actions.getSchedule(true)),\r\n    doLeaveSession: (session) => dispatch(actions.doLeaveSession(session)),\r\n    doJoinSession: (session) => dispatch(actions.doJoinSession(session))\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(TraineePage);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nimport * as actions from '../actions'\r\n\r\nimport AuthRequired from '../components/auth-required'\r\nimport Authorization from '../components/authorization'\r\n\r\nclass TraineesPage extends Component {\r\n  componentDidMount() {\r\n    if ((this.props.oidc.user||{}).access_token) this.props.getTraineesData()\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if ((this.props.oidc.user||{}.access_token) && !(prevProps.oidc.user||{}).access_token) this.props.getTraineesData()\r\n  }\r\n\r\n  render() {\r\n    const { oidc, trainees, config } = this.props\r\n    \r\n    const list = trainees.loaded\r\n     ? (\r\n      <ListGroup>\r\n        {trainees.items.map(t => <ListGroupItem tag={Link} to={config.localRoot + '/admin/trainees/' + t.member.id} action>{t.member.name}</ListGroupItem>)}\r\n      </ListGroup>\r\n     ) : <div>Loading ...</div>\r\n\r\n    return <div className='container-fluid py-4'>\r\n        <AuthRequired oidc={oidc}>\r\n          <Authorization allowMember showDenied>\r\n            <Link to=\"/admin\">&lt; Admin Home</Link>\r\n            <div>Trainee List</div>\r\n            {list}\r\n          </Authorization>\r\n        </AuthRequired>\r\n      </div>\r\n  }\r\n}\r\n\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    config: store.config,\r\n    oidc: store.oidc,\r\n    trainees: store.trainees\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getTraineesData: () => dispatch(actions.getTraineesData()),\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(TraineesPage);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nimport AuthRequired from '../components/auth-required'\r\nimport Authorization from '../components/authorization'\r\n\r\nclass AdminHomePage extends Component {\r\n  render() {\r\n    const { oidc } = this.props\r\n\r\n    return <div className='container-fluid py-4'>\r\n        <AuthRequired oidc={oidc}>\r\n          <Authorization allowMember showDenied>\r\n            <ListGroup>\r\n              <ListGroupItem tag={Link} to=\"/admin/trainees\" action>List of Trainees</ListGroupItem>\r\n              <ListGroupItem tag={Link} to=\"/admin/courses\" action>Course List</ListGroupItem>\r\n              <Authorization group=\"acct-managers\">\r\n                <ListGroupItem tag={Link} to=\"/admin/register\" action>Register Trainee</ListGroupItem>\r\n              </Authorization>\r\n            </ListGroup>\r\n          </Authorization>\r\n        </AuthRequired>\r\n      </div>\r\n  }\r\n}\r\n\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    config: store.config,\r\n    oidc: store.oidc\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(AdminHomePage);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { ListGroup, ListGroupItem, ListGroupItemHeading, ListGroupItemText, Table } from 'reactstrap'\r\n\r\nimport moment from 'moment'\r\n\r\nimport * as actions from '../actions'\r\n\r\nimport AuthRequired from '../components/auth-required'\r\nimport Authorization from '../components/authorization'\r\n\r\nclass CourseListPage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {current: props.tasks[0].title}\r\n  }\r\n\r\n  componentWillMount(nextprops) {\r\n    this.props.getScheduleData()\r\n  }\r\n\r\n  render() {\r\n    const { oidc, tasks, schedule, config } = this.props\r\n    \r\n    const list = (\r\n      <ListGroup>\r\n        {\r\n          tasks.map(t =>\r\n            <ListGroupItem key={t.title} style={{flexDirection:'column', alignItems:'stretch'}} active={this.state.current === t} action\r\n              onClick={() => this.setState({current: this.state.current === t ? null : t })}>\r\n              <ListGroupItemHeading>{t.title}</ListGroupItemHeading>\r\n              {this.state.current === t\r\n               ? <ListGroupItemText style={{color:'#212121'}} tag=\"div\">\r\n                 { schedule.loaded ?\r\n                <Table style={{backgroundColor: 'white'}}>\r\n                 <thead><tr><th>Date</th><th>Capacity</th><th>Registered</th><th>Wait List</th></tr></thead>\r\n                 <tbody>\r\n                 {(schedule.courses[t.title]||[]).map(o => \r\n                  <tr style={moment().add('day', -2).isBefore(o.when) ? null : {textDecoration:'line-through'}} key={o.id}>\r\n                    <td>{moment(o.when).format(\"HHmm ddd MMM Do\")}</td>\r\n                    <td>{o.capacity}</td>\r\n                    <td>{o.current}</td>\r\n                    <td>{o.waiting}</td>\r\n                    <td>\r\n                      <AuthRequired oidc={oidc}>\r\n                      <Authorization allowMember>\r\n                        <Link to={`${config.localRoot}/admin/courses/${o.id}`}>Roster</Link>\r\n                      </Authorization>\r\n                    </AuthRequired>\r\n                    </td>\r\n                    </tr>\r\n                 )}\r\n                 </tbody>\r\n                 </Table> : <div><i className='fa fa-spin fa-circle-o-notch'></i> Loading ...</div> }\r\n                 </ListGroupItemText>\r\n               : null}\r\n            </ListGroupItem>\r\n          )\r\n        }\r\n      </ListGroup>\r\n    )\r\n\r\n    return <div className='container-fluid py-4'>\r\n        <AuthRequired oidc={oidc}>\r\n          <Authorization allowMember showDenied>\r\n            <Link to=\"/admin\">&lt; Admin Home</Link>\r\n            <div>Course List</div>\r\n            {list}\r\n          </Authorization>\r\n        </AuthRequired>\r\n      </div>\r\n  }\r\n}\r\n\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    config: store.config,\r\n    oidc: store.oidc,\r\n    schedule: store.schedule,\r\n    tasks: store.tasks.filter(f => f.category === 'session')\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getScheduleData: () => dispatch(actions.getSchedule(false)),\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(CourseListPage);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { Table } from 'reactstrap'\r\nimport moment from 'moment'\r\n\r\nimport * as actions from '../actions'\r\n\r\nimport AuthRequired from '../components/auth-required'\r\nimport Authorization from '../components/authorization'\r\n\r\nclass CourseRosterPage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      courseId: props.match.params.courseId,\r\n      display: 'table',\r\n      loaded: false\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    console.log('did mount')\r\n    if ((this.props.oidc.user||{}).access_token) this.props.getScheduleData()\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if ((this.props.oidc.user||{}.access_token) && !(prevProps.oidc.user||{}).access_token && !this.props.schedule.loaded)\r\n     this.props.getScheduleData()\r\n  }\r\n\r\n  componentWillUpdate(nextProps, nextState) {\r\n    console.log('will update')\r\n\r\n    if (!this.state.offering && nextProps.schedule.loaded) {\r\n    //if (!this.props.schedule.loaded && nextProps.schedule.loaded\r\n      const courses = nextProps.schedule.courses\r\n      const titles = Object.keys(courses)\r\n\r\n      const offering = titles.reduce((prevT, curT) =>\r\n      prevT || courses[curT].reduce((prevO, curO) =>\r\n        prevO || (curO.id === nextState.courseId ? { title: curT, offering: curO} : null),\r\n        null),\r\n      null)\r\n\r\n      this.setState({ offering })\r\n\r\n      this.props.getRosterData(offering.title, offering.offering)\r\n      .then(()=> this.setState({loaded: true}))\r\n    }\r\n  }\r\n\r\n  getTrainee(memberId) {\r\n    const { trainees } = this.props\r\n    var trainee = (trainees.items||[]).find(f => f.id.toLowerCase() === memberId.toLowerCase())\r\n    return trainee\r\n  }\r\n\r\n  renderTable(roster) {\r\n    return <Table>\r\n      <thead><tr><th>Last Name</th><th>First Name</th>{/*<th>Adult/Youth</th><th>Gender</th>*/}<th>Email</th><th>Phone</th><th>Wait List?</th></tr></thead>\r\n      <tbody>\r\n        {roster.items.map(r => {\r\n          const trainee = this.getTrainee(r.memberId)\r\n          const contacts = (trainee||{}).contacts || []\r\n          return <tr key={r.id}>\r\n          {trainee ? <td>{trainee.last}</td> : <td colSpan=\"2\">{r.name}</td>}\r\n          {trainee ? <td>{trainee.first}</td> : null}\r\n          {/* <td></td>\r\n          <td>{(trainee||{}).gender}</td> */}\r\n          <td>{(contacts.find(f => f.type === 'email')||{}).value}</td>\r\n          <td>{(contacts.find(f => f.type === 'phone')||{}).value}</td>\r\n          <td>{r.onWaitList ? <i className=\"fa fa-hourglass\"></i> : null}</td>\r\n          </tr>})}\r\n        </tbody>\r\n      </Table>\r\n  }\r\n\r\n  render() {\r\n    const { oidc, roster } = this.props\r\n    \r\n    const course = this.state.offering || {}\r\n    const session = course.offering\r\n    \r\n    return <div className='container-fluid py-4'>\r\n        <AuthRequired oidc={oidc}>\r\n          <Authorization allowMember showDenied>\r\n            <Link to=\"/admin/courses\">&lt; Course List</Link>\r\n            <div>Course Roster for {course.title || <i className='fa fa-spin fa-circle-o-notch'></i>}</div>\r\n            {session ? <div>{moment(session.when).format(\"HHmm ddd MMM Do\")}</div> : null}\r\n            {this.state.loaded && roster.loaded ?\r\n              this.renderTable(roster)\r\n              : <div>Loading ...</div>\r\n            }\r\n          </Authorization>\r\n        </AuthRequired>\r\n      </div>\r\n  }\r\n}\r\n\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    config: store.config,\r\n    oidc: store.oidc,\r\n    schedule: store.schedule,\r\n    roster: store.roster,\r\n    trainees: store.trainees\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getScheduleData: () => dispatch(actions.getSchedule(false)),\r\n    getRosterData: (courseName, session) => dispatch(actions.getRoster(courseName, session))\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(CourseRosterPage);","import React, { Component } from 'react'\r\nimport './step.css'\r\n\r\nexport default class Step extends Component {\r\n  render() {\r\n    return (\r\n      <section className='step'>\r\n        <div>\r\n          <div className='step-circle'>{this.props.step}</div>\r\n          <div className='step-line hidden-xs-down'></div>\r\n        </div>\r\n        <div>\r\n          <div className='step-title'>{this.props.title}</div>\r\n          <div className='step-body'>{this.props.children}</div>\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { FormGroup, Label, Input } from 'reactstrap'\r\nimport moment from 'moment'\r\n\r\nimport Step from '../components/step'\r\nimport AuthRequired from '../components/auth-required'\r\nimport Authorization from '../components/authorization'\r\n\r\nimport * as actions from '../actions'\r\nimport axios, { CancelToken } from 'axios';\r\n\r\nconst requiredTrainings = [ {name: \"Core/First Aid\", id: \"f9975ace-6ac0-4655-abac-6e4cf7c78802\" }, { name: \"Core/CPR\", id: '25dd4c86-31a7-4b07-a665-3b87fa94a45d' } ];\r\n\r\nfunction ExistingAccountRow(props) {\r\n  const { account, memberId, sendInvitation, sendingInvite } = props\r\n  var inviteDom = null\r\n  if (account.username && account.username.length && sendInvitation) inviteDom = <button disabled={sendingInvite} onClick={() => sendInvitation(memberId, account.username)}>Send Invitation</button>\r\n  return <div><strong>{account.username}</strong> ({account.name || 'unnamed'} / {account.email}) {inviteDom}</div>\r\n}\r\n\r\nclass RegistrationPage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      newMember: true,\r\n      firstname: '',\r\n      middlename: '',\r\n      lastname: '',\r\n      birthdate: '',\r\n      memberQueryToken: null,\r\n      memberSearchList: [],\r\n      memberName: '',\r\n      memberId: '',\r\n      gender: 'unknown',\r\n      creatingMemberToken: null,\r\n\r\n      loadingMember: false,\r\n\r\n      email: '',\r\n      emailId: '',\r\n\r\n      phone: '',\r\n      phoneId: '',\r\n\r\n      trainings: null,\r\n\r\n      username: '',\r\n      userQueryToken: null,\r\n      usernameOk: true,\r\n      userAccounts: []\r\n    }\r\n  }\r\n  changeFirst = (evt) => {\r\n    this.setState({firstname: evt.target.value })\r\n  }\r\n  changeMiddle = (evt) => {\r\n    this.setState({middlename: evt.target.value })\r\n  }\r\n  changeLast = (evt) => {\r\n    this.setState({lastname: evt.target.value })\r\n  }\r\n  changeBirth = (evt) => {\r\n    this.setState({birthdate: evt.target.value })\r\n  }\r\n  changeGender = (evt) => {\r\n    this.setState({gender: evt.target.value })\r\n  }\r\n  changeEmail = (evt) => {\r\n    this.setState({email: evt.target.value })\r\n  }\r\n  changePhone = (evt) => {\r\n    this.setState({phone: evt.target.value })\r\n  }\r\n\r\n  changeUsername = (evt) => {\r\n    this.setState({username: evt.target.value })\r\n  }\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    if (this.state.firstname !== prevState.firstname || this.state.lastname !== prevState.lastname) {\r\n      this.throttledMemberSearch()\r\n    }\r\n\r\n    if (this.state.username !== prevState.username) {\r\n      this.throttledUserSearch()\r\n    }\r\n  }\r\n\r\n  useMember = (summary) => {\r\n    this.setState({\r\n      newMember: false,\r\n      memberName: summary.name,\r\n      memberId: summary.id,\r\n      memberSearchList: []\r\n    })\r\n    this.loadMember(summary.id);\r\n  }\r\n\r\n  throttledMemberSearch = () => {\r\n    this.memberLookupTimer && clearTimeout(this.memberLookupTimer);\r\n    this.memberLookupTimer = setTimeout(() => {\r\n      let cancelToken;\r\n      axios.get(`${this.props.config.remoteRoot}/search?t=Member&q=${this.state.lastname}`, {\r\n        cancelToken: new CancelToken(function executor(c) {\r\n          // An executor function receives a cancel function as a parameter\r\n          cancelToken = c;\r\n        })\r\n      })\r\n      .then(msg => {\r\n        this.setState({ memberSearchList: msg.data })\r\n      })\r\n      .finally(msg => {\r\n        this.memberLookupTimer = null\r\n        this.setState({memberQueryToken: null})\r\n      })\r\n      this.setState({memberQueryToken: cancelToken})\r\n    }, 250)\r\n  }\r\n\r\n  createMember = () => {\r\n    let cancelToken;\r\n    var bd = moment(this.state.birthdate)\r\n    if (!bd.isValid()) { alert('Invalid birth date.'); return }\r\n    if (!this.state.firstname || !this.state.lastname) { alert('First and last name required'); return }\r\n\r\n    const postData = {\r\n      first: this.state.firstname,\r\n      middle: this.state.middlename,\r\n      last: this.state.lastname,\r\n      birthDate: this.state.birthdate,\r\n      gender: this.state.gender\r\n    }\r\n\r\n    axios.post(`${this.props.config.localRoot}/api/trainees`, postData, {\r\n      cancelToken: new CancelToken(function executor(c) {\r\n        // An executor function receives a cancel function as a parameter\r\n        cancelToken = c;\r\n      })\r\n    })\r\n    .then(msg => {\r\n      this.setState({\r\n        memberId: msg.data.memberId,\r\n        memberName: msg.data.name,\r\n        memberSearchList: []\r\n      })\r\n      this.loadMember(msg.data.memberId)\r\n    })\r\n    .catch(reason => {\r\n      alert(\"Failed to create member in database\");\r\n    })\r\n    .finally(msg => {\r\n      this.setState({ creatingMemberToken: null })\r\n    })\r\n    this.setState({creatingMemberToken: cancelToken})\r\n  }\r\n\r\n  loadMember = (memberId) => {\r\n    this.setState({loadingMember: true})\r\n    axios.all([\r\n      axios.get(`${this.props.config.remoteRoot}/members/${memberId}/contacts`),\r\n      axios.get(`${this.props.config.remoteRoot}/members/${memberId}/trainingrecords`),\r\n      axios.get(`${this.props.config.authRoot}/account/formember/${memberId}`)\r\n    ])\r\n    .then(axios.spread(function (contacts, trainings, accounts) {\r\n      var emails = contacts.data.filter(f => f.type === 'email')\r\n      if (emails.length > 0) {\r\n        this.setState({ email: emails[0].value, emailId: emails[0].id })\r\n      }\r\n\r\n      var phones = contacts.data.filter(f => f.type === 'phone')\r\n      if (phones.length > 0) {\r\n        this.setState({ phone: phones[0].value, phoneId: phones[0].id })\r\n      }\r\n\r\n      const userTrainings = trainings.data.items.reduce((prev,cur) => { prev[cur.course.id] = cur; return prev; }, {})\r\n      this.setState({trainings: userTrainings})\r\n\r\n      this.setState({userAccounts: accounts.data.data})\r\n    }.bind(this)))\r\n    .finally(() => {\r\n      this.setState({loadingMember: false })\r\n    });\r\n  }\r\n\r\n  createEmail = () => {\r\n    let cancelToken;\r\n    const postData = {\r\n      type: 'email',\r\n      value: this.state.email\r\n    }\r\n    console.log(\"create email\", postData)\r\n    axios.post(`${this.props.config.remoteRoot}/members/${this.state.memberId}/contacts`, postData, {\r\n      cancelToken: new CancelToken(function executor(c) {\r\n        // An executor function receives a cancel function as a parameter\r\n        cancelToken = c;\r\n      })\r\n    })\r\n    .then(msg => {\r\n      this.setState({email: msg.data.value, emailId: msg.data.id })\r\n    })\r\n    .catch(reason => {\r\n      alert(\"Failed to create email in database\");\r\n    })\r\n    .finally(() => {\r\n      this.setState({creatingEmailToken: null })\r\n    })\r\n    this.setState({ creatingEmailToken: cancelToken })\r\n  }\r\n\r\n  createPhone = () => {\r\n    let cancelToken;\r\n    const postData = {\r\n      type: 'phone',\r\n      subType: 'cell',\r\n      value: this.state.phone\r\n    }\r\n    console.log(\"create phone\", postData)\r\n    axios.post(`${this.props.config.remoteRoot}/members/${this.state.memberId}/contacts`, postData, {\r\n      cancelToken: new CancelToken(function executor(c) {\r\n        // An executor function receives a cancel function as a parameter\r\n        cancelToken = c;\r\n      })\r\n    })\r\n    .then(msg => {\r\n      this.setState({phone: msg.data.value, phoneId: msg.data.id })\r\n    })\r\n    .catch(reason => {\r\n      alert(\"Failed to create phone in database\");\r\n    })\r\n    .finally(() => {\r\n      this.setState({creatingPhoneToken: null })\r\n    })\r\n    this.setState({ creatingPhoneToken: cancelToken })\r\n  }\r\n\r\n  throttledUserSearch = () => {\r\n    if (!(/^[a-zA-Z][a-zA-Z.-]+$/.test(this.state.username))) {\r\n      this.setState({usernameOk: false})\r\n      return\r\n    }\r\n    this.usernameLookupTimer && clearTimeout(this.usernameLookupTimer);\r\n    this.usernameLookupTimer = setTimeout(() => {\r\n      let cancelToken;\r\n      axios.get(`${this.props.config.authRoot}/account/checkname/${this.state.username}`, {\r\n        cancelToken: new CancelToken(function executor(c) {\r\n          // An executor function receives a cancel function as a parameter\r\n          cancelToken = c;\r\n        })\r\n      })\r\n      .then(msg => {\r\n        console.log(\"username query\", msg.data)\r\n        this.setState({ usernameOk: msg.data.data.available })\r\n      })\r\n      .finally(msg => {\r\n        this.usernameLookupTimer = null\r\n        this.setState({usernameQueryToken: null})\r\n      })\r\n      this.setState({usernameQueryToken: cancelToken})\r\n    }, 250)\r\n  }\r\n\r\n  createUser = () => {\r\n    let cancelToken;\r\n    const postData = {\r\n      username: this.state.username,\r\n      email: this.state.email,\r\n      name: this.state.memberName,\r\n      memberId: this.state.memberId\r\n    }\r\n    console.log(\"create user\", postData)\r\n    axios.post(`${this.props.config.authRoot}/account`, postData, {\r\n      cancelToken: new CancelToken(function executor(c) {\r\n        // An executor function receives a cancel function as a parameter\r\n        cancelToken = c;\r\n      })\r\n    })\r\n    .then(msg => {\r\n      this.setState({userAccounts: [ msg.data.data ]})\r\n      return this.sendInvitation(this.state.memberId, this.state.username)\r\n    })\r\n    .finally(() => {\r\n      this.setState({creatingUserToken: null })\r\n    })\r\n    this.setState({ creatingUserToken: cancelToken })\r\n\r\n    window.setTimeout(() => {\r\n      this.setState({creatingUserToken: null })\r\n    }, 1000)\r\n    this.setState({creatingUserToken: 'hi'})\r\n  }\r\n\r\n  sendInvitation = (memberId, username) => {\r\n    this.setState({sendingInvite: true})\r\n    var url = `${this.props.config.localRoot}/api/trainees/${memberId}/invite`\r\n    if (username) url += `?username=${username}`\r\n    axios.post(url, {})\r\n    .catch(() => {\r\n      alert('Failed to send invite')\r\n    })\r\n    .finally(msg => {\r\n      this.setState({sendingInvite: false})\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { oidc } = this.props\r\n\r\n    var trainingDom = null\r\n    if (this.state.memberId) {\r\n      trainingDom = <div>Loading ...</div>\r\n      if (this.state.trainings) {\r\n        trainingDom = requiredTrainings.map(t => {\r\n          const userTraining = this.state.trainings[t.id]\r\n          const completeDom = (userTraining === undefined || userTraining === null) ? <div>not found</div>\r\n                            : (userTraining.status === 'Complete' || userTraining.status === 'NotExpired') ? <span style={{color: '#008800'}}> {'\\u2713'}</span>\r\n                            : userTraining.status === 'Expired' ? <span style={{color: '#800'}}> Expired</span>\r\n                            : <span> Status {userTraining.status} unknown, please check</span>\r\n          \r\n          return (<div key={t.id}>{t.name}{completeDom}</div>)\r\n        })\r\n      }\r\n    }\r\n\r\n    return (\r\n      <AuthRequired oidc={oidc}>\r\n        <Authorization group=\"acct-managers\" showDenied>\r\n          <div className='container-fluid py-4'>\r\n            <Step step={1} title='Find / Create Member'>\r\n              {this.state.newMember ?\r\n              <div className='row'>\r\n                <FormGroup className='col-12 col-md'>\r\n                  <Label for='lastname'>Last Name</Label>\r\n                  <Input name='lastname' value={this.state.lastname} onChange={this.changeLast} readOnly={!!this.state.memberId} />\r\n                </FormGroup>\r\n                <FormGroup className='col-12 col-md'>\r\n                  <Label for='firstname'>First Name</Label>\r\n                  <Input name='firstname' value={this.state.firstname} onChange={this.changeFirst} readOnly={!!this.state.memberId} />\r\n                </FormGroup>\r\n                <FormGroup className='col-12 col-md'>\r\n                  <Label for='middlename'>Middle Name</Label>\r\n                  <Input name='middlename' value={this.state.middlename} onChange={this.changeMiddle} readOnly={!!this.state.memberId} />\r\n                </FormGroup>\r\n              </div>\r\n              :\r\n              <div>Existing member {this.state.memberName} <a target='_blank' rel=\"noopener noreferrer\" href={this.props.config.remoteRoot.replace(\"/api2\", `/members/detail/${this.state.memberId}`)}>database</a></div>\r\n              }\r\n              {this.state.newMember ?\r\n              <div className='row'>\r\n                <FormGroup className='col-12 col-md'>\r\n                  <Label for='birthdate'>Birth Date (yyyy-mm-dd)</Label>\r\n                  <Input name='birthdate' value={this.state.birthdate} onChange={this.changeBirth} readOnly={!!this.state.memberId} />\r\n                </FormGroup>\r\n                <FormGroup className='col-12 col-md'>\r\n                  <Label for='gender'>Gender</Label>\r\n                  <Input type=\"select\" name=\"gender\" value={this.state.gender} onChange={this.changeGender} disabled={!!this.state.memberId}>\r\n                    <option value=\"unknown\">Unknown / Other</option>\r\n                    <option value=\"male\">Male</option>\r\n                    <option value=\"female\">Female</option>\r\n                  </Input>\r\n                </FormGroup>\r\n              </div> : null}\r\n              {this.state.newMember && !this.state.memberId ?\r\n                <button className=\"btn btn-primary\" disabled={this.state.creatingMember} onClick={this.createMember}>Create Member{this.state.creatingMemberToken ? <span> <i className='fa fa-fw fa-spin fa-spinner'></i></span> : null}</button>\r\n               : null}\r\n              <div>\r\n                {this.state.memberQueryToken != null ? <div>Searching ...</div> : null}\r\n                {this.state.memberSearchList.length > 0 ? <div>Possible existing members:</div> : null}\r\n                {this.state.memberSearchList.map(m => (\r\n                  <div key={m.summary.id}>{m.summary.name} <button onClick={() => this.useMember(m.summary)} >use</button> <a target='_blank' rel=\"noopener noreferrer\" href={this.props.config.remoteRoot.replace(\"/api2\", `/members/detail/${m.summary.id}`)}>database</a></div>\r\n                ))}\r\n              </div>\r\n            </Step>\r\n            <Step step={2} title='Contact Information'>\r\n              {!this.state.memberId ? null :\r\n              <div className='row'>\r\n                <FormGroup className='col-12 col-md'>\r\n                  <Label for='email'>Email</Label>\r\n                  <Input name='email' value={this.state.email} onChange={this.changeEmail} readOnly={!!this.state.emailId} />\r\n                  {this.state.emailId ? null : <button className=\"btn btn-primary\" disabled={this.state.creatingEmailToken} onClick={this.createEmail}>Save{this.state.creatingEmailToken ? <span> <i className='fa fa-fw fa-spin fa-spinner'></i></span> : null}</button>}\r\n                </FormGroup>\r\n                <FormGroup className='col-12 col-md'>\r\n                  <Label for='phone'>Cell Number</Label>\r\n                  <Input name='phone' value={this.state.phone} onChange={this.changePhone} readOnly={!!this.state.phoneId} />\r\n                  {this.state.phoneId ? null : <button className=\"btn btn-primary\" disabled={this.state.creatingPhoneToken} onClick={this.createPhone}>Save{this.state.creatingPhoneToken ? <span> <i className='fa fa-fw fa-spin fa-spinner'></i></span> : null}</button>}\r\n                </FormGroup>\r\n              </div>}\r\n            </Step>\r\n            <Step step={3} title='Prerequisite Training'>\r\n              {trainingDom}\r\n            </Step>\r\n            <Step step={4} title='User Account'>\r\n              {!this.state.memberId ? null :\r\n                this.state.userAccounts.length\r\n                  ? <div>\r\n                      {this.state.userAccounts.length && !this.state.username ? <div>This user already has one or more accounts:</div> : null }\r\n                      {this.state.userAccounts.map(a => <ExistingAccountRow key={a.id} account={a} memberId={this.state.memberId} sendInvitation={this.state.username ? null : this.sendInvitation} sendingInvite={this.state.sendingInvite} />)}\r\n                    </div>\r\n                  : <div>\r\n                      <div className='row'>\r\n                        <FormGroup className='col-6 col-md'>\r\n                          <Label for='username'>Username</Label>\r\n                          <Input name='username' value={this.state.username} onChange={this.changeUsername} />\r\n                        </FormGroup>\r\n                      </div>\r\n                      <div>\r\n                        <button className=\"btn btn-primary\" disabled={!(this.state.emailId && this.state.username && this.state.usernameOk)} onClick={this.createUser}>Create User{this.state.creatingUser ? <span> <i className='fa fa-fw fa-spin fa-spinner'></i></span> : null}</button>\r\n                        {this.state.usernameOk ? null : <div className=\"text-danger\">Username is invalid or already exists</div> }\r\n                        {this.state.emailId ? null : <div className=\"text-warning\">Member needs at least one email</div> }\r\n                      </div>\r\n                    </div>\r\n                }\r\n            </Step>\r\n          </div>\r\n        </Authorization>\r\n      </AuthRequired>\r\n    )\r\n  }\r\n}\r\n\r\nconst storeToProps = (store) => {\r\n  return {\r\n    oidc: store.oidc,\r\n    user: store.oidc ? store.oidc.user : undefined,\r\n    config: store.config\r\n  }\r\n}\r\n\r\nconst dispatchToProps = (dispatch, ownProps) => {\r\n  return {\r\n    getUserData: () => dispatch(actions.getUserData())\r\n  }\r\n}\r\n\r\nexport default connect(storeToProps, dispatchToProps)(RegistrationPage)","import React, { Component } from 'react';\nimport { Collapse, Navbar, NavbarToggler, Nav, NavItem } from 'reactstrap';\nimport { connect } from 'react-redux'\nimport { OidcProvider } from 'redux-oidc'\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport { GatewayProvider, GatewayDest } from 'react-gateway'\n\nimport store from './store'\nimport userManager from './user-manager'\nimport * as actions from './actions'\n\nimport LoggedInPage from './pages/logged-in'\nimport HomePage from './pages/home'\nimport TraineePage from './pages/trainee'\nimport TraineesPage from './pages/trainees'\nimport AdminHomePage from './pages/admin-home'\nimport CoursesPage from './pages/course-list'\nimport CourseRoster from './pages/course-roster'\nimport RegistrationPage from './pages/registration'\n\nconst watchMemberId = props => {\n  const { member, oidc } = store.getState()\n  console.log('watchMemberId', props.match, oidc, member)\n  const memberId = ((props.match || {}).params || {}).memberId || (((oidc||{}).user||{}).profile||{}).memberId\n  if (memberId !== (member||{}).id) {\n    store.dispatch({type: actions.SET_MEMBER, payload: { id: memberId } })\n  }\n  return null\n}\nstore.subscribe(() => {\n  watchMemberId({match: { params: { memberId: store.getState().member.id }}})\n})\n\nclass App extends Component {\n  state = {\n    isOpen: false\n  }\n\n  toggleAuth = () => {\n    const { user, doSignin, doSignout } = this.props\n    if (user && user.token_type) {\n      doSignout()\n    } else {\n      doSignin()\n    }\n  }\n\n  toggle = () => {\n    this.setState({isOpen: !this.state.isOpen})\n  }\n\n  render() {\n    const { user } = this.props\n\n    return (\n      <OidcProvider store={store} userManager={userManager}>\n        <Router>\n      <GatewayProvider>\n        <div>\n          <Navbar color='dark' dark expand=\"md\">\n            <NavbarToggler onClick={this.toggle} />\n            <Link to='/' className='navbar-brand'>King County ESAR<span className='hidden-xs-down'> - Basic Training</span></Link>\n            <Collapse isOpen={this.state.isOpen} navbar>\n              <Nav className='ml-auto' navbar>\n                <NavItem><button className='nav-link' onClick={this.toggleAuth}>Sign {user && user.token_type ? 'out' : 'in'}</button></NavItem>\n              </Nav>\n            </Collapse>\n          </Navbar>\n          <Route exact path='/loggedIn' component={LoggedInPage} />\n          <Route exact path='/' component={HomePage} />\n          <Route path='/me' render={watchMemberId} />\n          <Route exact path='/me' component={TraineePage} />\n          <Route exact path='/admin' component={AdminHomePage} />\n          <Route path='/admin/trainees/:memberId' render={watchMemberId} />\n          <Route exact path='/admin/trainees' component={TraineesPage} />\n          <Route exact path='/admin/trainees/:memberId' component={TraineePage} />\n          <Route exact path='/courses' component={CoursesPage} />\n          <Route exact path='/admin/courses' component={CoursesPage} />\n          <Route exact path='/admin/courses/:courseId(\\\\d+)' component={CourseRoster} />\n          <Route exact path='/admin/register' component={RegistrationPage} />\n\n          <div className='container py-4'>\n            <div className='row justify-content-center'>\n              <div style={{ margin: '0 auto', textAlign: 'center', padding: '5px', fontSize: '90%' }}>© 2019 - This project is open source. View it on <a href=\"https://github.com/kcesar/esar-training\">GitHub</a></div>\n            </div>\n          </div>\n          <GatewayDest name=\"root\" />\n        </div>\n      </GatewayProvider>\n      </Router>\n    </OidcProvider>\n    );\n  }\n}\n\nconst storeToProps = (store) => {\n  return {\n    user: store.oidc.user\n  }\n}\n\nconst dispatchToProps = (dispatch, ownProps) => {\n  return {\n    doSignin: () => dispatch(actions.doSignin()),\n    doSignout: () => dispatch(actions.doSignout())\n  }\n}\n\nexport default connect(storeToProps, dispatchToProps)(App)","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { loadUser } from 'redux-oidc'\nimport axios from 'axios'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './index.css'\nimport App from './App'\nimport './App.css'\n\nimport store from './store'\nimport userManager from './user-manager'\nimport * as serviceWorker from './serviceWorker'\n\n// Where should this go?\naxios.interceptors.request.use(config => {\n  const user = store.getState().oidc.user\n  if (user && user.access_token) {\n    config.headers['Authorization'] = 'Bearer ' + user.access_token\n  }\n  return config\n}, error => Promise.reject(error))\n\nloadUser(store, userManager)\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/can2-checkin.a033bc23.jpg\";","module.exports = __webpack_public_path__ + \"static/media/team-evac.49e3a532.jpg\";","module.exports = __webpack_public_path__ + \"static/media/in-the-woods.3ae90303.jpg\";","module.exports = __webpack_public_path__ + \"static/media/litter-wheel.4fc5ac65.jpg\";"],"sourceRoot":""}